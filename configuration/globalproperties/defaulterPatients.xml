<config>
  <globalProperties>
    <globalProperty>
      <property>emrapi.sqlSearch.defaulterPatients</property>
      <value>
      select distinct concat(pn.given_name," ", ifnull(pn.family_name,'')) as name,
        pn.given_name as givenName,
        pn.family_name as familyName,
        pi.identifier as identifier,
        concat("",p.uuid) as uuid
      from
        patient pat join person_name pn on pat.patient_id = pn.person_id and pn.voided = 0 and pat.voided=0
        join patient_identifier pi on pat.patient_id = pi.patient_id and pi.voided=0
        join patient_identifier_type pit on pi.identifier_type = pit.patient_identifier_type_id
        join global_property gp on gp.property="bahmni.primaryIdentifierType" and gp.property_value=pit.uuid
        join person p on p.person_id = pat.patient_id and p.voided=0
      where
        patientIsDefaulter(pat.patient_id)
      order by pat.patient_id desc;
      </value>
    </globalProperty>
  </globalProperties>
</config>